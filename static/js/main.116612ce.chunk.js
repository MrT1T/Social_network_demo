(this.webpackJsonpmy=this.webpackJsonpmy||[]).push([[0],{122:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(32),a=n(5),u={dialogs:[{id:1,ava:"https://klike.net/uploads/posts/2019-03/1551511784_4.jpg",name:"Irisha"},{id:2,ava:"https://vibirai.ru/image/964470.jpg",name:"Telega"},{id:3,ava:"https://vibirai.ru/image/964470.jpg",name:"Zhora"},{id:4,ava:"https://likevideogid.ru/wp-content/uploads/2019/11/likee_avatarka2-400x398.jpg",name:"Alex"},{id:5,ava:"https://likevideogid.ru/wp-content/uploads/2019/11/likee_avatarka4-400x572.jpg",name:"Sergey"}],message:[{id:1,message:"Hi"},{id:2,message:"Hi"},{id:3,message:"I Can"},{id:4,message:"I smart programmer"},{id:5,message:"I Can"},{id:6,message:"I smart programmer"}]},c=function(e){return{type:"ADD-MESSAGE",newMassageBody:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialogs/ADD-MESSAGE":return Object(a.a)(Object(a.a)({},e),{},{message:[].concat(Object(r.a)(e.message),[{id:7,message:t.newMassageBody}])});default:return e}}},126:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return E})),n.d(t,"f",(function(){return O}));var r=n(8),a=n.n(r),u=n(12),c=n(32),o=n(5),i=n(13),s=function(e,t,n){return e.map((function(e){return e.id===t?Object(o.a)(Object(o.a)({},e),n):e}))},l="users/FOLLOW",f={users:[],pageSize:10,totalUsersCounts:0,currentPage:1,isFetching:!1,followingInProgress:[]},m=function(e){return{type:l,userId:e}},p=function(e){return{type:"users/UNFOLLOW",userId:e}},d=function(e){return{type:"users/SET_CURRENT_PAGE",currentPage:e}},g=function(e){return{type:"users/TOGGLE_IS_FETCHING",isFetching:e}},h=function(e,t){return{type:"users/TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},v=function(e,t){return function(){var n=Object(u.a)(a.a.mark((function n(r){var u;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(g(!0)),n.next=3,i.c.getUsers(e,t);case 3:u=n.sent,r(g(!1)),r({type:"users/SET_USERS",users:u.items}),r({type:"users/SET_TOTAL_USERS_COUNT",totalUsersCounts:u.totalCount});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},b=function(){var e=Object(u.a)(a.a.mark((function e(t,n,r,u){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(h(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(u(n)),t(h(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),E=function(e){return function(){var t=Object(u.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b(n,e,i.c.follow.bind(i.c),m);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(u.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b(n,e,i.c.unfollow.bind(i.c),p);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),{},{users:s(e.users,t.userId,{followed:!0})});case"users/UNFOLLOW":return Object(o.a)(Object(o.a)({},e),{},{users:s(e.users,t.userId,{followed:!1})});case"users/SET_USERS":return Object(o.a)(Object(o.a)({},e),{},{users:Object(c.a)(t.users)});case"users/SET_CURRENT_PAGE":return Object(o.a)(Object(o.a)({},e),{},{currentPage:t.currentPage});case"users/SET_TOTAL_USERS_COUNT":return Object(o.a)(Object(o.a)({},e),{},{totalUsersCounts:t.totalUsersCounts});case"users/TOGGLE_IS_FETCHING":return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetching});case"users/TOGGLE_IS_FOLLOWING_PROGRESS":return Object(o.a)(Object(o.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(c.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}}},127:function(e,t,n){e.exports={header:"Header_header__2C5Mv"}},13:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var r=n(129),a=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"0dae7712-dc7e-4e47-8867-e94d453af339"}}),u={getUsers:function(e,t){return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollow:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data}))},follow:function(e){return a.post("follow/".concat(e)).then((function(e){return e.data}))}},c={getProfile:function(e){return a.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return a.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return a.put("profile/status",{status:e}).then((function(e){return e.data}))}},o={me:function(){return a.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logout:function(){return a.delete("auth/login").then((function(e){return e.data}))}}},131:function(e,t,n){e.exports=n.p+"static/media/810.eded90f3.svg"},158:function(e,t,n){e.exports=n(287)},160:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},24:function(e,t,n){e.exports={nav:"Navbar_nav__JM17z",item:"Navbar_item__2qmjl",activeLink:"Navbar_activeLink__1DUYA",LoginBlok:"Navbar_LoginBlok__Vr-jN"}},287:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);n(160),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(61),c=n.n(u),o=n(49),i=n(50),s=n(60),l=n(59),f=(n(164),n(127)),m=n.n(f),p=function(){return a.a.createElement("header",{className:m.a.header},a.a.createElement("img",{src:"https://themesinspire.com/templates/tropical-html/images/logo.png",alt:""}))},d=(n(165),function(e){return a.a.createElement("div",null,"Music")}),g=(n(166),function(e){return a.a.createElement("div",null,"News")}),h=(n(167),function(e){return a.a.createElement("div",null,"Settings")}),v=n(10),b=n(20),E=n(24),O=n.n(E),j=function(e){return a.a.createElement("nav",{className:O.a.nav},a.a.createElement("div",{className:O.a.item},a.a.createElement(b.b,{to:"/Profile",activeClassName:O.a.activeLink},"Profile"),a.a.createElement(b.b,{to:"/Dialogs",activeClassName:O.a.activeLink},"Messages"),a.a.createElement(b.b,{to:"/Users",activeClassName:O.a.activeLink},"Users"),a.a.createElement(b.b,{to:"/News",activeClassName:O.a.activeLink},"News"),a.a.createElement(b.b,{to:"/Music",activeClassName:O.a.activeLink},"Music"),a.a.createElement(b.b,{to:"/Settings",activeClassName:O.a.activeLink},"Settings"),a.a.createElement("span",{className:O.a.LoginBlok},e.isAuth?a.a.createElement("div",null,e.login," - ",a.a.createElement("button",{onClick:e.logout},"Log out")):a.a.createElement(b.b,{to:"/login"},"Login"))))},_=n(19),w=n(8),S=n.n(w),y=n(12),k=n(5),C=n(13),I=n(39),L={userId:null,email:null,login:null,isAuth:!1},T=function(e,t,n,r){return{type:"auth/SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:r}}},N=function(){return function(){var e=Object(y.a)(S.a.mark((function e(t){var n,r,a,u,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.me();case 2:0===(n=e.sent).resultCode&&(r=n.data,a=r.id,u=r.email,c=r.login,t(T(a,u,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":return Object(k.a)(Object(k.a)({},e),t.payload);default:return e}},x=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return a.a.createElement(j,this.props)}}]),n}(a.a.Component),P=Object(_.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(y.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.logout();case 2:0===e.sent.resultCode&&t(T(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(x),U=n(123),R=n(124),F=n(62),G=n(68),M=n(33),D=n.n(M),z=Object(R.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,a.a.createElement(U.a,{placeholder:"email",name:"email",component:F.a,validate:[G.b]})),a.a.createElement("div",null,a.a.createElement(U.a,{placeholder:"Password",type:"password",name:"password",component:F.a,validate:[G.b]})),a.a.createElement("div",null,a.a.createElement(U.a,{component:F.a,type:"checkbox",name:"rememberMe"})," remember me"),n&&a.a.createElement("div",{className:D.a.formSummaryError},n),a.a.createElement("div",null,a.a.createElement("button",null,"Login")))})),B=Object(_.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var r=Object(y.a)(S.a.mark((function r(a){var u,c;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C.a.login(e,t,n);case 2:0===(u=r.sent).resultCode?a(N()):(c=u.messages.length>0?u.messages[0]:"Some error",a(Object(I.a)("login",{_error:c})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?a.a.createElement(v.a,{to:"/profile"}):a.a.createElement("div",null,a.a.createElement("h1",null,"LOGIN"),a.a.createElement(z,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}}))})),W=n(9),H={initialaized:!1},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/INITIALAIZED_SUCCESS":return Object(k.a)(Object(k.a)({},e),{},{initialaized:!0});default:return e}},q=n(83),J=n(122),V=n(90),X={},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;return e},K=n(126),$=n(132),Q=n(125),ee=Object(W.c)({dialogsPage:J.b,profilePage:V.b,sidebarPage:Y,usersPage:K.a,auth:A,form:Q.a,app:Z}),te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||W.d,ne=Object(W.e)(ee,te(Object(W.a)($.a)));window.__store=ne;var re=ne,ae=a.a.lazy((function(){return n.e(3).then(n.bind(null,299))})),ue=a.a.lazy((function(){return n.e(5).then(n.bind(null,301))})),ce=a.a.lazy((function(){return n.e(4).then(n.bind(null,300))})),oe=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initialaizeApp()}},{key:"render",value:function(){return this.props.initialaized?a.a.createElement("div",{className:"app-wrapper"},a.a.createElement(p,null),a.a.createElement(P,null),a.a.createElement("div",{className:"app-content"},a.a.createElement(v.b,{path:"/News",component:g}),a.a.createElement(v.b,{path:"/Music",component:d}),a.a.createElement(v.b,{path:"/Settings",component:h}),a.a.createElement(a.a.Suspense,{fallback:a.a.createElement(q.a,null)},a.a.createElement(v.b,{path:"/Profile/:userId?",render:function(){return a.a.createElement(ae,null)}}),a.a.createElement(v.b,{path:"/Dialogs",render:function(){return a.a.createElement(ue,null)}}),a.a.createElement(v.b,{path:"/Users",render:function(){return a.a.createElement(ce,null)}})),a.a.createElement(v.b,{path:"/Login",render:function(){return a.a.createElement(B,null)}}))):a.a.createElement(q.a,null)}}]),n}(a.a.Component),ie=Object(W.d)(v.f,Object(_.b)((function(e){return{initialaized:e.app.initialaized}}),{initialaizeApp:function(){return function(){var e=Object(y.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(N());case 2:t({type:"app/INITIALAIZED_SUCCESS"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(oe),se=function(){return a.a.createElement(b.a,null,a.a.createElement(_.a,{store:re},a.a.createElement(ie,null),","),",")};c.a.render(a.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},33:function(e,t,n){e.exports={formControl:"FormsControls_formControl__3qOBh",error:"FormsControls_error__1RmZL",formSummaryError:"FormsControls_formSummaryError__osOlW"}},62:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),u=n(33),c=n.n(u),o=function(e){var t=e.meta.touched&&e.meta.error;return a.a.createElement("div",{className:c.a.formControl+" "+(t?c.a.error:" ")},a.a.createElement("div",null,a.a.createElement("textarea",Object.assign({},e.input,e))),t&&a.a.createElement("span",null,e.meta.error))},i=function(e){var t=e.meta.touched&&e.meta.error;return a.a.createElement("div",{className:c.a.formControl+" "+(t?c.a.error:" ")},a.a.createElement("div",null,a.a.createElement("input",Object.assign({},e.input,e))),t&&a.a.createElement("span",null,e.meta.error))}},68:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){if(!e)return"Field is required"},a=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},83:function(e,t,n){"use strict";var r=n(0),a=n.n(r),u=n(131),c=n.n(u);t.a=function(e){return a.a.createElement("div",null,a.a.createElement("img",{src:c.a}))}},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return g}));var r=n(8),a=n.n(r),u=n(12),c=n(32),o=n(5),i=n(13),s="profile/ADD-POST",l={posts:[{id:1,message:"My name is Eugene",likesCount:125},{id:2,message:"How are you?",likesCount:215}],profile:null,status:""},f=function(e){return{type:s,newPost:e}},m=function(e){return{type:"profile/SET_STATUS",status:e}},p=function(e){return function(){var t=Object(u.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.getProfile(e);case 2:r=t.sent,n({type:"profile/SET_USER_PROFILE",profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(u.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.getStatus(e);case 2:r=t.sent,n(m(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(u.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.updateStatus(e);case 2:0===t.sent.resultCode&&n(m(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(o.a)(Object(o.a)({},e),{},{posts:[].concat(Object(c.a)(e.posts),[{id:5,message:t.newPost,likesCount:0}])});case"profile/SET_USER_PROFILE":return Object(o.a)(Object(o.a)({},e),{},{profile:t.profile});case"profile/SET_STATUS":return Object(o.a)(Object(o.a)({},e),{},{status:t.status});case"profile/DELETE_POST":return Object(o.a)(Object(o.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});default:return e}}}},[[158,1,2]]]);
//# sourceMappingURL=main.116612ce.chunk.js.map